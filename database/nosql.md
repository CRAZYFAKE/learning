[TOC]

# Memcache、Redis和MongoDB

## 1.Memcache

**优势：**

可以利用多核优势，单实例吞吐量极高。

支持直接配置为session handle。

**局限：**

数据类型单一，只支持简单的key/value。

无法进行持久化，数据不能备份，只能用于缓存使用，且重启后数据全部丢失。

无法进行数据同步，不能将MC中的数据迁移到其他MC实例中。

## 2.Redis

**优势：**

支持多种数据结构，string（字符串）、 list(双向链表)、dict(hash表)、set(集合）、zset(排序set)、hyperloglog（基数估算）。

支持持久化操作，可以进行aof及rdb数据持久化到磁盘。

单线程请求，所有命令串行执行，不存在数据不一致的问题。

支持pub/sub消息订阅机制，可以用来进行消息订阅与通知。

**局限：**

只能使用单线程，不能有效多核CPU。

Redis在string类型上会消耗较多内存，可以使用dict（hash表）压缩存储以降低内存耗用。

不适合进行查询搜索，比如redis的keys pattern这种匹配操作，对redis的性能是灾难。

## 3.MongoDB

一种文档性的数据库，可以存放xml、json、bson类型系那个的数据。

适合场景：事件记录、内容管理或者博客平台，比如评论系统。

mysql的每一次更新操作都会直接写入硬盘，但是mongo不会，做为内存型数据库，数据操作会先写入内存，然后再会持久化到硬盘中去。

NoSQL是非关系型数据库，NoSQL = Not Only SQL。关系型数据库采用的结构化的数据，NoSQL采用的是键值对的方式存储数据。

关系型数据库与非关系型数据库的区别，即数据存储结构的不同。

**特点：**

（1）面向文档（2）高性能（3）高可用（4）易扩展（5）丰富的查询语言



## 4.对比

|          | Memcache                               | Redis                                    | MongoDB                     |
| -------- | -------------------------------------- | ---------------------------------------- | --------------------------- |
| **性能**   | 高                                      | 高                                        | 中高                          |
| **查询**   | 数据结构单一                                 | 数据结构较丰富                                  | 丰富的数据表达，索引，最类似关系型数据库        |
| **空间**   | 可以修改最大可用内存,采用LRU算法                     | 可以对key value设置过期时间                       | 适合大数据量的存储，依赖操作系统VM做内存管理     |
| **可用性**  |                                        |                                          | 支持master-slave              |
| **持久化**  | 不支持，通常用在做缓存,提升性能                       | 支持（快照、AOF）：依赖快照进行持久化，aof增强了可靠性的同时，对性能有所影响 | 从1.8版本开始采用binlog方式支持持久化的可靠性 |
| **事务支持** | 在并发场景下，用cas保证一致性                       | 事务支持比较弱，只能保证事务中的每个操作连续执行                 | 不支持事务                       |
| **数据分析** | 不支持                                    | 不支持                                      | 支持                          |
| **应用场景** | 做缓存，提高性能（适合读多写少，对于数据量比较大，可以采用sharding） | 数据量较小的更性能操作和运算上                          | 海量数据的访问效率问题                 |

